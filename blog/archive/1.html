<!DOCTYPE html>
<html lang='en'>
  <head>
    <meta charset='utf-8'>
    <title>Archive (articles 1 to 5) - Michael Mior</title>
    <link href='/styles.css' rel='stylesheet'>
    <link href='/img/favicon.ico' rel='icon'>
    <meta content='nanoc 3.6.4' name='generator'>
    <link href='/atom.xml' rel='alternate' title='Michael Mior' type='application/atom+xml'>
  </head>
  <body class='home page'>
    <div class='hfeed' id='wrapper'>
      <div id='header'>
        <div id='blog-title'>
          <h1>
            <a href='/' rel='home' title='Michael Mior'>
              <span class='word-1'>Michael</span>
              <span class='word-2'>Mior</span>
            </a>
          </h1>
        </div>
        <div id='access'>
          <div class='skip-link'>
            <a href='#content' title='Skip navigation to the content'></a>
          </div>
          <div class='menu'>
            <ul class='sf-menu'>
              <li>
                <a href="/">Home</a>
              </li>
              <li>
                <a href="/about/">About</a>
              </li>
              <li>
                <a href="/contact/">Contact</a>
              </li>
              <li>
                <a href="/blog/archive/1.html">Blog</a>
              </li>
            </ul>
          </div>
        </div>
      </div>
    </div>
    <div id='main'>
      <div id='container'>
        <div id='content'>
          <div class='page hentry'>
            <h1 class='entry-title'>Archive (articles 1 to 5)</h1>
            <div class='entry-content'>&#x000A;  <h1><a href="/2012/09/15/blog/node-js-skeleton-project.html">Node.js skeleton&nbsp;project</a></h1>&#x000A;  <p>Unfortunately, it’s obviously been a long time since this blog has been&nbsp;updated.&#x000A;  Since the last post, I’ve been hard at work rewriting our Web app in Django (finally got rid of our old <span class="caps"><span class="caps">PHP</span></span>) and picking up iPhone app&nbsp;development.&#x000A;  Keep an eye out for some cool stuff coming up in the near&nbsp;future.</p>&#x000A;  &#x000A;  <p>In my spare time, I’ve been playing around with Node.js&nbsp;development.&#x000A;  I decided to release the sample project I’ve been working&nbsp;on.&#x000A;  You may find it useful if you’re looking to get up and running&nbsp;quickly.&#x000A;  It’s still a work in progress, but it’s coming along&nbsp;nicely.</p>&#x000A;  &#x000A;  <p>Check out <a href="https://github.com/michaelmior/node-loco-skeleton">node-loco-skeleton</a> on&nbsp;GitHub.</p>&#x000A;  <h1><a href="/2012/01/14/blog/unit-testing-django-model-mixins.html">Unit testing Django model&nbsp;mixins</a></h1>&#x000A;  <p>I recently found myself having to unit test some model mixins and I thought I would share the technique I used in case anyone else finds it&nbsp;useful.&#x000A;  You could just pick a model which uses the mixin and run the test on instances of that&nbsp;model.&#x000A;  But the goal of a mixin is to provide reusable functionality independent of any&nbsp;model.&#x000A;  Instead, we create a dummy model we can use for&nbsp;testing.</p>&#x000A;  &#x000A;  <p>The model shouldn’t reside in <code>models.py</code> since we don’t want it in our&nbsp;database.&#x000A;  Instead, we create the model&nbsp;dynamically.&#x000A;  However, I wanted to test some functionality which requires saving the model to the&nbsp;database.&#x000A;  Fortunately, Django can construct the necessary <span class="caps"><span class="caps">SQL</span></span> to create and destroy the database&nbsp;table.&#x000A;  we simply override setUp and tearDown to do the heavy&nbsp;lifting.</p>&#x000A;  &#x000A;  <div>&#x000A;  <div class="CodeRay">&#x000A;    <div class="code"><pre><span class="line-numbers"> <a href="#n1" name="n1">1</a></span><span style="color:#080;font-weight:bold">from</span> <span style="color:#B44;font-weight:bold">django.test</span> <span style="color:#080;font-weight:bold">import</span> <span style="color:#B44;font-weight:bold">TestCase</span>&#x000A;  <span class="line-numbers"> <a href="#n2" name="n2">2</a></span><span style="color:#080;font-weight:bold">from</span> <span style="color:#B44;font-weight:bold">django.db</span> <span style="color:#080;font-weight:bold">import</span> <span style="color:#B44;font-weight:bold">connection</span>&#x000A;  <span class="line-numbers"> <a href="#n3" name="n3">3</a></span><span style="color:#080;font-weight:bold">from</span> <span style="color:#B44;font-weight:bold">django.core.management.color</span> <span style="color:#080;font-weight:bold">import</span> <span style="color:#B44;font-weight:bold">no_style</span>&#x000A;  <span class="line-numbers"> <a href="#n4" name="n4">4</a></span><span style="color:#080;font-weight:bold">from</span> <span style="color:#B44;font-weight:bold">django.db.models.base</span> <span style="color:#080;font-weight:bold">import</span> <span style="color:#B44;font-weight:bold">ModelBase</span>&#x000A;  <span class="line-numbers"> <a href="#n5" name="n5">5</a></span>&#x000A;  <span class="line-numbers"> <a href="#n6" name="n6">6</a></span><span style="color:#080;font-weight:bold">class</span> <span style="color:#B06;font-weight:bold">ModelMixinTestCase</span>(TestCase):&#x000A;  <span class="line-numbers"> <a href="#n7" name="n7">7</a></span>    <span style="color:#777"><span style="color:#444">"""</span><span></span></span>&#x000A;  <span class="line-numbers"> <a href="#n8" name="n8">8</a></span><span style="color:#777"><span></span><span>    Base class for tests of model mixins. To use, subclass and specify</span><span></span></span>&#x000A;  <span class="line-numbers"> <a href="#n9" name="n9">9</a></span><span style="color:#777"><span></span><span>    the mixin class variable. A model using the mixin will be made</span><span></span></span>&#x000A;  <span class="line-numbers"><strong><a href="#n10" name="n10">10</a></strong></span><span style="color:#777"><span></span><span>    available in self.model.</span><span></span></span>&#x000A;  <span class="line-numbers"><a href="#n11" name="n11">11</a></span><span style="color:#777"><span></span><span>    </span><span style="color:#444">"""</span></span>&#x000A;  <span class="line-numbers"><a href="#n12" name="n12">12</a></span>&#x000A;  <span class="line-numbers"><a href="#n13" name="n13">13</a></span>    <span style="color:#080;font-weight:bold">def</span> <span style="color:#06B;font-weight:bold">setUp</span>(<span style="color:#069">self</span>):&#x000A;  <span class="line-numbers"><a href="#n14" name="n14">14</a></span>        <span style="color:#777"># Create a dummy model which extends the mixin</span>&#x000A;  <span class="line-numbers"><a href="#n15" name="n15">15</a></span>        <span style="color:#069">self</span>.model = ModelBase(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">__TestModel__</span><span style="color:#710">'</span></span>+<span style="color:#069">self</span>.mixin.__name__, (<span style="color:#069">self</span>.mixin,),&#x000A;  <span class="line-numbers"><a href="#n16" name="n16">16</a></span>            { <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">__module__</span><span style="color:#710">'</span></span>: <span style="color:#069">self</span>.mixin.__module__ })&#x000A;  <span class="line-numbers"><a href="#n17" name="n17">17</a></span>&#x000A;  <span class="line-numbers"><a href="#n18" name="n18">18</a></span>        <span style="color:#777"># Create the schema for our test model</span>&#x000A;  <span class="line-numbers"><a href="#n19" name="n19">19</a></span>        <span style="color:#069">self</span>._style = no_style()&#x000A;  <span class="line-numbers"><strong><a href="#n20" name="n20">20</a></strong></span>        sql, _ = connection.creation.sql_create_model(<span style="color:#069">self</span>.model, <span style="color:#069">self</span>._style)&#x000A;  <span class="line-numbers"><a href="#n21" name="n21">21</a></span>&#x000A;  <span class="line-numbers"><a href="#n22" name="n22">22</a></span>        <span style="color:#069">self</span>._cursor = connection.cursor()&#x000A;  <span class="line-numbers"><a href="#n23" name="n23">23</a></span>        <span style="color:#080;font-weight:bold">for</span> statement <span style="color:#080;font-weight:bold">in</span> sql:&#x000A;  <span class="line-numbers"><a href="#n24" name="n24">24</a></span>            <span style="color:#069">self</span>._cursor.execute(statement)&#x000A;  <span class="line-numbers"><a href="#n25" name="n25">25</a></span>&#x000A;  <span class="line-numbers"><a href="#n26" name="n26">26</a></span>    <span style="color:#080;font-weight:bold">def</span> <span style="color:#06B;font-weight:bold">tearDown</span>(<span style="color:#069">self</span>):&#x000A;  <span class="line-numbers"><a href="#n27" name="n27">27</a></span>        <span style="color:#777"># Delete the schema for the test model</span>&#x000A;  <span class="line-numbers"><a href="#n28" name="n28">28</a></span>        sql = connection.creation.sql_destroy_model(<span style="color:#069">self</span>.model, (), <span style="color:#069">self</span>._style)&#x000A;  <span class="line-numbers"><a href="#n29" name="n29">29</a></span>        <span style="color:#080;font-weight:bold">for</span> statement <span style="color:#080;font-weight:bold">in</span> sql:&#x000A;  <span class="line-numbers"><strong><a href="#n30" name="n30">30</a></strong></span>            <span style="color:#069">self</span>._cursor.execute(statement)&#x000A;  </pre></div>&#x000A;  </div>&#x000A;  </div>&#x000A;  &#x000A;  <p>To make use of this code, just subclass from <code>ModelMixinTestCase</code> and set the mixin class variable to the model mixin class you wish to&nbsp;test.&#x000A;  You’ll then have access to a fully functioning model which uses this mixin via&nbsp;<code>self.model</code>.&#x000A;  Happy&nbsp;testing!</p>&#x000A;  <h1><a href="/2012/01/06/blog/mysql-client-configuration.html">My<span class="caps">SQL</span> Client&nbsp;Configuration</a></h1>&#x000A;  <p>Perhaps I’m the only one who didn’t know this, but a while back, I discovered a handy trick for configuring the My<span class="caps"><span class="caps">SQL</span></span>&nbsp;client.&#x000A;  You can create a configuration file in your home directory, <code>~/.my.cnf</code> and set options for the My<span class="caps"><span class="caps">SQL</span></span> client to&nbsp;use.&#x000A;  Really handy if you’re constantly connecting to the same server and tired of entering hostname and port&nbsp;parameters.</p>&#x000A;  &#x000A;  <p>Here’s an&nbsp;example:</p>&#x000A;  &#x000A;  <div>&#x000A;  <div class="CodeRay">&#x000A;    <div class="code"><pre><span class="line-numbers"><a href="#n1" name="n1">1</a></span>[client]&#x000A;  <span class="line-numbers"><a href="#n2" name="n2">2</a></span>host     = 127.0.0.1&#x000A;  <span class="line-numbers"><a href="#n3" name="n3">3</a></span>user     = root&#x000A;  <span class="line-numbers"><a href="#n4" name="n4">4</a></span>password = root&#x000A;  <span class="line-numbers"><a href="#n5" name="n5">5</a></span>port     = 4040&#x000A;  </pre></div>&#x000A;  </div>&#x000A;  </div>&#x000A;  &#x000A;  <p>That’s it for this&nbsp;post.&#x000A;  If you know any other time-saving tips for My<span class="caps"><span class="caps">SQL</span></span>, please share in the&nbsp;comments!</p>&#x000A;  <h1><a href="/2011/03/06/blog/coloured-ssh-terminals.html">Coloured <span class="caps">SSH</span>&nbsp;terminals</a></h1>&#x000A;  <p>With the looming prospect of deploying software to production systems and horror stories of accidental commands executed on production systems instead of development machines, I wanted to try to find a way to ensure this never happened to&nbsp;me.&#x000A;  My first thought was to change the background colour of the terminal as that would be a clear indicator of the system I’m connected&nbsp;to.&#x000A;  Unfortunately, gnome-terminal doesn’t allow changing the background colour of a running terminal and I don’t always want to launch a new terminal to&nbsp;<span class="caps"><span class="caps">SSH.</span></span>&#x000A;  Fortunately, I found a&nbsp;solution.</p>&#x000A;  &#x000A;  <p>While doing some research on the possibility of changing the <code>gnome-terminal</code> background, I came across <a href="http://roxterm.sourceforge.net/">ROXTerm</a>.&#x000A;  ROXTerm has a <span class="caps"><span class="caps">DBUS</span></span> interface which can be used to control profiles and colour scheme of an open&nbsp;terminal.&#x000A;  Unfortunately, the documentation on this interface is a little&nbsp;light.&#x000A;  Thanks to <a href="http://news.ycombinator.com/user?id=shimon">shimon</a> for his comment on <a href="http://news.ycombinator.com/item?id=2089159">this post</a> on Hacker&nbsp;News.</p>&#x000A;  &#x000A;  <p>I created a new colour scheme titled “Warning” including a red background with the intent of using this in any terminals where I know I need to be extra&nbsp;careful.</p>&#x000A;  &#x000A;  <div>&#x000A;  <div class="CodeRay">&#x000A;    <div class="code"><pre><span class="line-numbers"><a href="#n1" name="n1">1</a></span>dbus-send --session /net/sf/roxterm/Options net.sf.roxterm.Options.SetColourScheme string:$ROXTERM_ID "string:Warning"&#x000A;  </pre></div>&#x000A;  </div>&#x000A;  </div>&#x000A;  &#x000A;  <p>The next step was to get this command executed every time I connect to one of these&nbsp;servers.&#x000A;  I first created a simple script to save some typing, <code>roxterm-colour</code>. I placed this in <code>~/bin</code> (make sure to add this to your&nbsp;<code>PATH</code>).</p>&#x000A;  &#x000A;  <div>&#x000A;  <div class="CodeRay">&#x000A;    <div class="code"><pre><span class="line-numbers"><a href="#n1" name="n1">1</a></span>#!/bin/sh&#x000A;  <span class="line-numbers"><a href="#n2" name="n2">2</a></span>if [ -n $ROXTERM_ID ]; then&#x000A;  <span class="line-numbers"><a href="#n3" name="n3">3</a></span>dbus-send --session /net/sf/roxterm/Options net.sf.roxterm.Options.SetColourScheme string:$ROXTERM_ID "string:$1"&#x000A;  <span class="line-numbers"><a href="#n4" name="n4">4</a></span>fi&#x000A;  </pre></div>&#x000A;  </div>&#x000A;  </div>&#x000A;  &#x000A;  <p>Using a local ssh config file in <code>~/.ssh/config</code> allows you to set connection-specific&nbsp;options.&#x000A;  The configuration settings below show how the colour scheme can be changed whenever the production system is connected&nbsp;to.</p>&#x000A;  &#x000A;  <div>&#x000A;  <div class="CodeRay">&#x000A;    <div class="code"><pre><span class="line-numbers"><a href="#n1" name="n1">1</a></span>Host prod&#x000A;  <span class="line-numbers"><a href="#n2" name="n2">2</a></span>Hostname production.example.com&#x000A;  <span class="line-numbers"><a href="#n3" name="n3">3</a></span>LocalCommand roxterm-colour Warning&#x000A;  </pre></div>&#x000A;  </div>&#x000A;  </div>&#x000A;  &#x000A;  <p>Now I can connect via ssh prod and the colour changes as&nbsp;expected.&#x000A;  The remaining problem is resetting the colour scheme as soon as the connection is&nbsp;broken.&#x000A;  Unfortunately, <span class="caps"><span class="caps">SSH</span></span> doesn’t have any option to allow the execution of a command when a connection is&nbsp;broken.&#x000A;  For this, I created a simple script to alias <span class="caps"><span class="caps">SSH</span></span> and reset the colour scheme after the connection&nbsp;dies.&#x000A;  This sits in <code>~/bin/ssh</code>. In this case, you must ensure that <code>~/bin</code> comes before <code>/usr/bin</code> in your&nbsp;<code>PATH</code>.</p>&#x000A;  &#x000A;  <div>&#x000A;  <div class="CodeRay">&#x000A;    <div class="code"><pre><span class="line-numbers"><a href="#n1" name="n1">1</a></span>#!/bin/sh&#x000A;  <span class="line-numbers"><a href="#n2" name="n2">2</a></span>trap "roxterm-colour Tango" EXIT&#x000A;  <span class="line-numbers"><a href="#n3" name="n3">3</a></span>/usr/bin/ssh $*&#x000A;  </pre></div>&#x000A;  </div>&#x000A;  </div>&#x000A;  &#x000A;  <p>The <code>trap</code> command ensures that the colour scheme will be reset whenever the script exits (my default colour scheme is&nbsp;Tango).&#x000A;  Finally, I also found that if I open a new tab while SSHed into a coloured terminal, this tab will also take on the same&nbsp;colour.&#x000A;  Therefore, I also added roxterm-colour Tango to my .bashrc so the colour would be reset with every new&nbsp;terminal.</p>&#x000A;  &#x000A;  <p>I’m pretty happy with this setup and hoping it will help keep me from making any disastrous&nbsp;mistakes.&#x000A;  I’ve now replaced gnome-terminal with roxterm as my&nbsp;default.&#x000A;  Know any other tips on avoiding mistakes for production&nbsp;systems?&#x000A;  Let me know in the&nbsp;comments!</p>&#x000A;  <h1><a href="/2011/01/05/blog/rubbos.html">RUBBoS</a></h1>&#x000A;  <p>While working on my Masters thesis, I needed a solid database&nbsp;benchmark.&#x000A;  RUBBoS is a fairly common benchmark in the field, but unfortunately is a few years out of&nbsp;date.&#x000A;  While it was fantastically simple to set up, I did run into a few issues associated with newer versions of <span class="caps"><span class="caps">PHP</span></span> and Java as well as a few minor&nbsp;bugs.</p>&#x000A;  &#x000A;  <p>Since the benchmark is fully open-source, I decided to release my&nbsp;modifications.&#x000A;  You can download these changes to RUBBoS via <a href="https://github.com/michaelmior/RUBBoS">GitHub</a>.&#x000A;  Installation instructions and some additional notes can also be found&nbsp;there.&#x000A;  The most important thing to note is that I have only tested the <span class="caps"><span class="caps">LAMP</span></span> version of the&nbsp;application.</p>&#x000A;  &#x000A;  <p>Hope someone finds this&nbsp;useful!</p>&#x000A;</div>
          </div>
        </div>
      </div>
    </div>
    <div id='footer'>
      <div id='siteinfo'>
        &copy; 2013 Michael Mior
      </div>
    </div>
  </body>
</html>
